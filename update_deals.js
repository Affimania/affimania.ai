const fs = require('fs');
const path = require('path');

// üì∏ Har product ke liye MULTIPLE Images ka pool (Variety ke liye)
const imagePool = {
    "Winter Jackets": [
        "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=500",
        "https://images.unsplash.com/photo-1544923246-77307dd654ca?w=500",
        "https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=500",
        "https://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=500"
    ],
    "Sweaters": [
        "https://images.unsplash.com/photo-1620799140408-edc6dcb6d633?w=500",
        "https://images.unsplash.com/photo-1611911813524-8e9f4283139c?w=500",
        "https://images.unsplash.com/photo-1574201635302-388dd92a4c3f?w=500",
        "https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=500"
    ],
    "Smartwatch": [
        "https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=500",
        "https://images.unsplash.com/photo-1508685096489-7aacd43bd3b1?w=500",
        "https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=500",
        "https://images.unsplash.com/photo-1544117518-30df57964493?w=500"
    ],
    "Wireless Buds": [
        "https://images.unsplash.com/photo-1590658268037-6bf12165a8df?w=500",
        "https://images.unsplash.com/photo-1572569511254-d8f925fe2cbb?w=500",
        "https://images.unsplash.com/photo-1606220588913-b3aacb4d2f46?w=500",
        "https://images.unsplash.com/photo-1484704849700-f032a568e944?w=500"
    ],
    "Running Shoes": [
        "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500",
        "https://images.unsplash.com/photo-1560769629-975ec94e6a86?w=500",
        "https://images.unsplash.com/photo-1543508282-6319a3e46bc1?w=500",
        "https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?w=500"
    ],
    "Backpack": [
        "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?w=500",
        "https://images.unsplash.com/photo-1622560480605-d83c853bc5c3?w=500",
        "https://images.unsplash.com/photo-1546750334-9eefd89776d7?w=500",
        "https://images.unsplash.com/photo-1581605405669-fcdf81165afa?w=500"
    ],
    "Skincare Serum": [
        "https://images.unsplash.com/photo-1620916566398-39f1143f7c6e?w=500",
        "https://images.unsplash.com/photo-1570194065650-d99fb4b8ccb0?w=500",
        "https://images.unsplash.com/photo-1608248597279-f99d160bfcbc?w=500",
        "https://images.unsplash.com/photo-1612817288484-6f916006741a?w=500"
    ]
};

// Seasonal Database Logic (Keep it as it is)
const seasonalDatabase = {
    winter: {
        badge: "WINTER SPECIAL ‚ùÑÔ∏è",
        title: "Crush Your <span class='text-blue-400'>2026 Goals</span>",
        desc: "Best deals on Winter Wear, Fitness Gear, and Health Essentials.",
        bg: "https://images.unsplash.com/photo-1517836357463-d25dfeac3438?q=80&w=1200",
        accent: "#164E63",
        categories: [
            {n: "Winter Wear", i: "üß•", l: "winter+wear+jackets"},
            {n: "Fitness", i: "üèãÔ∏è‚Äç‚ôÇÔ∏è", l: "fitness+equipment"},
            {n: "Gadgets", i: "‚åö", l: "smartwatch"},
            {n: "Health", i: "ü•ó", l: "health+supplements"}
        ]
    }
};

const trendingProducts = Object.keys(imagePool);
const realDealsData = [];

for (let i = 1; i <= 99; i++) {
    const price = Math.floor(Math.random() * 8000) + 500;
    const mrp = price + Math.floor(Math.random() * 3000) + 500;
    const randomProduct = trendingProducts[Math.floor(Math.random() * trendingProducts.length)];
    
    // üé≤ YAHAN RANDOM IMAGE SELECT HORI HAI POOL SE
    const currentPool = imagePool[randomProduct];
    const randomImg = currentPool[Math.floor(Math.random() * currentPool.length)];

    realDealsData.push({
        title: `${randomProduct} - Special Deal!`,
        price: price,
        mrp: mrp,
        savings: `Flat ${Math.round(((mrp - price) / mrp) * 100)}% Off`,
        affiliate_link: `https://www.amazon.in/s?k=${randomProduct.replace(/\s/g, '+')}&tag=ascreation00f-21`,
        image: randomImg // Random variety image
    });
}

const indexPath = path.join(__dirname, 'index.html');
let content = fs.readFileSync(indexPath, 'utf8');

content = content.replace(/(\/\/ --- START: AUTOGENERATED DEALS DATA ---)[\s\S]*?(\/\/ --- END: AUTOGENERATED DEALS DATA ---)/, 
    `$1\nconst dummyDeals = ${JSON.stringify(realDealsData, null, 4)};\n$2`);

content = content.replace(/(\/\/ --- START: CONTEXT DATA ---)[\s\S]*?(\/\/ --- END: CONTEXT DATA ---)/, 
    `$1\nconst affimaniaContext = ${JSON.stringify(seasonalDatabase.winter)};\n$2`);

fs.writeFileSync(indexPath, content);
console.log('‚úÖ Variety Images Added Successfully!');
