const fs = require('fs');
const path = require('path');

// üîê Affiliate Tag
const PARTNER_TAG = 'ascreation00f-21';

// Catchy Button Labels
const buttonLabels = ["Grab This Deal!", "2026 Special Price", "Unlock Offer", "Limited Time Deal", "Check Best Price", "Shop Now"];

// Festive Keywords for Search
const searchQueries = [
    'smartwatch for men 2026',
    'gaming headphones rgb',
    'smart home gadgets',
    'christmas new year gift hampers',
    'premium wireless earbuds',
    'laptops for students'
];

function generateDynamicDeals() {
    let finalDeals = [];
    
    // 2026 Real Product Database (‡§ú‡§¨ API ‡§ï‡§æ‡§Æ ‡§® ‡§ï‡§∞‡•á, ‡§§‡§¨ ‡§≠‡•Ä ‡§Ø‡•á Real Photos ‡§¶‡§ø‡§ñ‡§æ‡§è‡§ó‡§æ)
    const productPool = [
        { t: "Fire-Boltt Phoenix Smartwatch", img: "https://m.media-amazon.com/images/I/61y2VVWlnBL._AC_UL320_.jpg" },
        { t: "boAt Rockerz 450 Headphones", img: "https://m.media-amazon.com/images/I/516LU0H963L._AC_UL320_.jpg" },
        { t: "Echo Dot (5th Gen) Smart Speaker", img: "https://m.media-amazon.com/images/I/61C48I7yfVL._AC_UL320_.jpg" },
        { t: "HP Laptop 15s Ryzen 3", img: "https://m.media-amazon.com/images/I/71-FS7P80NL._AC_UL320_.jpg" },
        { t: "Sony WH-1000XM5 Wireless", img: "https://m.media-amazon.com/images/I/51aBtkSThFL._AC_UL320_.jpg" },
        { t: "OnePlus Nord Buds 2", img: "https://m.media-amazon.com/images/I/514NPRZ1AQL._AC_UL320_.jpg" },
        { t: "Logitech G502 Gaming Mouse", img: "https://m.media-amazon.com/images/I/71876YcKDRL._AC_UL320_.jpg" },
        { t: "Samsung Galaxy Watch 6", img: "https://m.media-amazon.com/images/I/61f4+n52jHL._AC_UL320_.jpg" }
    ];

    console.log("Generating 40 Unique Festive Deals...");

    for (let i = 0; i < 40; i++) {
        const item = productPool[i % productPool.length];
        const price = Math.floor(Math.random() * 8000) + 999;
        const mrp = Math.floor(price * 1.6);
        const randomQuery = searchQueries[Math.floor(Math.random() * searchQueries.length)];

        finalDeals.push({
            title: `${item.t} - ${randomQuery.split(' ')[0]} Edition`,
            price: price.toLocaleString('en-IN'),
            mrp: mrp.toLocaleString('en-IN'),
            savings: `üî• SAVE ${Math.round(((mrp - price) / mrp) * 100)}% TODAY`,
            // Affiliate link jo directly Amazon Search par le jayega optimized results ke liye
            affiliate_link: `https://www.amazon.in/s?k=${encodeURIComponent(item.t)}&tag=${PARTNER_TAG}`,
            image: item.img,
            btnText: buttonLabels[i % buttonLabels.length]
        });
    }

    const indexPath = path.join(__dirname, 'index.html');
    let content = fs.readFileSync(indexPath, 'utf8');
    
    const startTag = "// --- START: AUTOGENERATED DEALS DATA ---";
    const endTag = "// --- END: AUTOGENERATED DEALS DATA ---";
    const replaceStr = `${startTag}\nconst dummyDeals = ${JSON.stringify(finalDeals, null, 4)};\n${endTag}`;
    
    content = content.replace(/(\/\/ --- START: AUTOGENERATED DEALS DATA ---)[\s\S]*?(\/\/ --- END: AUTOGENERATED DEALS DATA ---)/, replaceStr);
    
    fs.writeFileSync(indexPath, content);
    console.log('‚úÖ Success: 40 Unique Deals with Real Product Photos Updated!');
}

generateDynamicDeals();
