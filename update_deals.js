const fs = require('fs');
const path = require('path');

const PARTNER_TAG = 'ascreation00f-21';
const buttonLabels = ["Grab This Deal!", "2026 Special Price", "Unlock Offer", "Limited Time Deal", "Check Best Price", "Shop Now"];

function generateBrandedDeals() {
    let finalDeals = [];
    
    // Alag-alag trending categories for titles
    const categories = [
        "Smart Headphones",
        "AI Smartwatch",
        "Gaming Laptop",
        "Home Gadget",
        "Wireless Mouse",
        "4K Smart TV",
        "Mesh Wi-Fi",
        "Mechanical Keyboard"
    ];

    console.log("Generating 40 Branded Deals with 'Best deal by AFFIMANIA Ai' text...");

    for (let i = 0; i < 40; i++) {
        const cat = categories[i % categories.length];
        const price = Math.floor(Math.random() * 8000) + 1200;
        const mrp = Math.floor(price * 1.5);

        finalDeals.push({
            title: `Premium ${cat} - Festive Deal #${i + 1}`,
            price: price.toLocaleString('en-IN'),
            mrp: mrp.toLocaleString('en-IN'),
            savings: `ðŸ”¥ FLAT ${Math.round(((mrp - price) / mrp) * 100)}% OFF`,
            affiliate_link: `https://www.amazon.in/s?k=${encodeURIComponent(cat)}&tag=${PARTNER_TAG}`,
            
            // âœ… Image placeholder with full text: "Best deal by AFFIMANIA Ai"
            // Color: Dark Navy Background (#0f172a) and Emerald Text (#10b981)
            image: `https://placehold.co/600x400/0f172a/10b981?text=Best+deal+by+AFFIMANIA+Ai`, 
            
            btnText: buttonLabels[i % buttonLabels.length]
        });
    }

    const indexPath = path.join(__dirname, 'index.html');
    let content = fs.readFileSync(indexPath, 'utf8');
    
    const startTag = "// --- START: AUTOGENERATED DEALS DATA ---";
    const endTag = "// --- END: AUTOGENERATED DEALS DATA ---";
    const replaceStr = `${startTag}\nconst dummyDeals = ${JSON.stringify(finalDeals, null, 4)};\n${endTag}`;
    
    content = content.replace(/(\/\/ --- START: AUTOGENERATED DEALS DATA ---)[\s\S]*?(\/\/ --- END: AUTOGENERATED DEALS DATA ---)/, replaceStr);
    
    fs.writeFileSync(indexPath, content);
    console.log('âœ… Success: All 40 deals now show "Best deal by AFFIMANIA Ai" in images.');
}

generateBrandedDeals();
